{"version":3,"sources":["bloc.js","main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"idee.js","sourcesContent":["var couleurBlocFerme = $('.bloc:not(.ouvert):not(.ouverture)').css(\"background-color\");\n\n(function ( $ ) {\n\n    $.fn.bloc = function() {\n\n        return this.each(function() {\n\n            /**\n             * Ouverture d'un bloc\n             */\n            $(this).click(function(event) {\n\n                if($(event.target).parents(\".fiche\").length) return true;\n\n                event.preventDefault();\n\n                if($(this).hasClass(\"ouvert\") || $(this).hasClass(\"ouverture\")) return false;\n\n                $(\".projet.ouvert\").each(function() {\n                    if($(this).data(\"visuelferme\")) {\n                        $(this).css(\"background-image\", \"url(\" + $(this).data(\"visuelferme\") + \")\");\n                    }\n                    $(this).css(\"background-color\", couleurBlocFerme);\n                });\n\n                // Passage visuel ouverture en couleur\n                if($(this).data(\"visuelouvert\")) {\n                    $(this).css(\"background-image\", \"url(\" + $(this).data(\"visuelouvert\") + \")\");\n                }\n                $(this).css(\"background-color\", $(this).data(\"couleur\"));\n\n                // Fermeture du bloc ouvert\n                $('.bloc.ouvert').removeClass(\"deplie\").addClass(\"fermeture\");\n\n                // Ouverture...\n                $(this).removeClass(\"deplie\").addClass(\"ouverture\");\n\n                // Et scroll pendant l'ouverture\n                scrollToBloc($(this), 400);\n            });\n\n            /**\n             * Plier / déplier un bloc\n             */\n            $(this).find(\".action-pli\").click(function(event) {\n\n                event.preventDefault();\n\n                // if(isSmartphone()) return false;\n\n                var $bloc = $(this).parents(\".bloc\");\n                // var $horizontal = $bloc.parents(\".horizontal\");\n\n                $(this).addClass(\"hidden\");\n\n                if($bloc.hasClass(\"deplie\")) {\n                    // On replie\n                    $bloc.removeClass(\"deplie\");\n\n                } else {\n                    // On déplie\n                    $bloc.find(\".fiche .content\").hide();\n                    $bloc.addClass(\"deplie\");\n                    $bloc.find(\".fiche .content\").fadeIn();\n                    scrollToBloc($bloc, 0);\n\n                    // Gestion history\n                    window.history.pushState({foo:\"bar\"}, $(event.currentTarget).data(\"titre\"), $(event.currentTarget).prop(\"href\"));\n                }\n\n                $(this).removeClass(\"hidden\");\n            });\n\n            /**\n             * Une fois ouvert ou fermé (animation terminée) :\n             */\n            $(this).on(\"transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd\", function(e) {\n\n                // if(isSmartphone()) return false;\n\n                if($(this).hasClass(\"ouverture\")) {\n                    $(this).removeClass(\"ouverture\");\n                    $(this).addClass(\"ouvert\");\n\n                }  else if($(this).hasClass(\"fermeture\")) {\n                    $(this).removeClass(\"fermeture ouvert ouverture deplie\");\n                }\n            });\n\n        });\n    };\n\n}( jQuery ));\n\n\n\nfunction scrollToBloc($bloc, animationLength, callback) {\n    if(!$bloc.length) return;\n\n    console.log(\"scroll\", $bloc.offset().top);\n\n    $('body').animate(\n        {'scrollTop': $bloc.offset().top - 90},\n        animationLength,\n        callback\n    );\n}\n","$( document ).ready(function() {\n\n    var MODE_LIGHTBOX = false;\n\n    $(\".bloc\").bloc();\n\n    scrollToBloc($(\".bloc.ouvert\"), 0);\n\n    $('.imagelightbox').imageLightbox({\n        allowedTypes: '',\n        onLoadStart: function() { captionOff(); },\n        onLoadEnd:\t function() { captionOn(); },\n        onStart: function() { MODE_LIGHTBOX=true; overlayOn(); },\n        onEnd: function() { captionOff(); overlayOff(); MODE_LIGHTBOX=false; }\n    });\n\n    function captionOn() {\n        var description = $('a[href=\"' + $( '#imagelightbox' ).attr( 'src' ) + '\"]').attr('title');\n        if(description.length > 0) {\n            $('<div id=\"imagelightbox-caption\">' + description + '</div>').appendTo('body');\n        }\n    }\n    function captionOff() {\n        $('#imagelightbox-caption').remove();\n    }\n    function overlayOn() {\n        $( '<div id=\"imagelightbox-overlay\"></div>' ).appendTo( 'body' );\n    }\n    function overlayOff() {\n        $( '#imagelightbox-overlay' ).remove();\n    }\n\n    var $logo = $(\"header .logo .marque\");\n    window.setTimeout(function() {\n        randomizeLogo(0);\n    }, 3000);\n\n    function randomizeLogo(posPrec) {\n        var pos = posPrec;\n        while(pos == posPrec) pos = Math.floor((Math.random() * 6)) * 25;\n\n        var posPX = \"-\" + pos + \"px\";\n        $logo.css(\"background-position\", \"center \" + posPX);\n\n        window.setTimeout(function() {\n            randomizeLogo(pos);\n        }, 3000);\n    }\n\n});\n\n\nfunction isSmartphone() {\n    return $(\"#XS:visible\").length;\n}"]}